<% provide(:title, 'Form Version Responses') %>

<h1>Form Version Responses</h1>

<h2 class="subheader">
  <%= @form_version.name %>
  <span>(<%= @form_version.project %>, v<%= @form_version.id %>)</span>
</h2>

<% if @responses.empty? %>
<p>There are no responses for this form version yet.</p>
<% else %>
<table id="form-responses">
  <thead>
    <tr>
      <th>User</th>
      <th>Date</th>
      <% @form_version.fields.each do |field| %>
      <td class="field-response-header"><%= render partial: "admin/forms/#{field.kind.underscore}/response_table_header", locals: { field: field } %></td>
      <% end %>
    </tr>
  </thead>
  <tbody>
    <% @responses.each do |response| %>
    <tr>
      <td><%= response.user.nil? ? "---" : response.user.username %></td>
      <td><%= response.date %></td>
      <% response.field_responses.each do |field_response| %>
      <td class="field-response #{field_response.form_field.kind}-field-response"><%= render partial: "admin/forms/#{field_response.form_field.kind.underscore}/response_table_cell", locals: { field_response: field_response } %></td>
      <% end %>
    </tr>
    <% end %>
  </tbody>
</table>
<% end %>

